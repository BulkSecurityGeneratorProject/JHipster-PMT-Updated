<div *ngIf="boardcustom">


    <div class="boardParent" style="display: flex; flex-direction: row; justify-content: space-between">
        <div class="schemeBoard" style="display: flex; flex-direction: row; justify-content: space-between">
            <div class="boardName">
                <h5>
                    <span>{{boardcustom.project.name}}</span>
                </h5>
            </div>

            <div>
                &nbsp;
                <span class="fa fa-angle-right" style="font-size: x-large; font-weight: bolder;"></span>
                &nbsp;
            </div>

            <div>
                <h5>
                    <span>
                        <div *ngIf="myColumns">Columns</div>
                        <div *ngIf="myStatuses">Statuses</div>
                        <div *ngIf="mySprints">Sprints</div>
                    </span>
                </h5>
            </div>
        </div>
        <div class="backBtn pr-2 pb-2">
            <button type="submit"
                    (click)="previousState()"
                    class="btn btn-info">
                <span class="fa fa-arrow-left"></span>&nbsp;<span> Back</span>
            </button>
        </div>
    </div>


    <p-tabMenu [activeItem]="boardItems[0]" [model]="boardItems"></p-tabMenu>

    <!--

    <div class="row" id="boardspec" >
        <div class="board-name"><h4>{{boardcustom.name}}</h4></div>

        <div class="board-choices">

        </div>

    </div>


    <div class="boardAgile row pl-3">
        <div class="boardCh" >
            <p-tabMenu [activeItem]="scrumItems[0]" *ngIf="boardcustom.type.toUpperCase().localeCompare('SCRUM')===0" [model]="scrumItems"></p-tabMenu>
            <p-tabMenu [activeItem]="kanbanItems[0]" *ngIf="boardcustom.type.toUpperCase().localeCompare('KANBAN')===0" [model]="kanbanItems"></p-tabMenu>
        </div>

        <div class="boardConf">
            <div class="d-inline-block" ngbDropdown #myDrop="ngbDropdown">
                <button class="btn btn-success" id="dropdownManual" aria-hidden="true" ngbDropdownToggle >Board</button>
                <div ngbDropdownMenu aria-labelledby="dropdownManual">
                    <li class="dropdown-item"><a [routerLink]="['../configure', + boardcustom.id]">Configure</a></li>
                    <li class="dropdown-item"><a [routerLink]="['/', { outlets: { popup: ['boardcustom-new'] } }]">Create Board</a></li>
                </div>
            </div>
        </div>

    </div>


    <section class="main">
        <div class="container pl-0 py-3" id="currentIssues" *ngIf="activeSprint && Backlog">
            <div class="PartialBacklog row">
                <div class="sprintInfo">
                    <div class="WIP">
                        <div class="Selected" *ngIf="boardcustom.type.toUpperCase() === 'KANBAN'">Selected for Development</div>
                        <div class="sprintName" *ngIf="boardcustom.type.toUpperCase() === 'SCRUM'">{{activeSprint.name}}</div>
                    </div>
                    <div class="sprintIssues">{{relatedIssuesPerSprint.length}} issues</div>
                </div>
                <div class="startSprintBtn">
                    <button disabled="disabled" *ngIf="(boardcustom.type.toUpperCase().localeCompare('SCRUM')===0) && (!activeSprint.isActive)" class="btn btn-warning" id="startSprintBtn" (click)="startSprint()" [routerLink]="['/', { outlets: { popup: 'sprintcustoms/'+ activeSprint.id + '/start'} }]">Start Sprint</button>
                </div>
            </div>

            <div class="sprintDates row pb-3" *ngIf="activeSprint.startDate && activeSprint.endDate">
                <div class="sprintStart">{{activeSprint.startDate | date:'mediumDate'}}</div>
                <div class="separateDates"> | </div>
                <div class="sprintEnd">{{activeSprint.endDate | date:'mediumDate'}}</div>
            </div>

            <div class="dropZone container px-5" id="droppable" (dragover)="allowDrop($event)" (drop)="drop($event)" *ngIf="relatedIssuesPerSprint">
                <div class="a" *ngIf="activeSprint.isActive">
                    <div class="b" *ngFor="let sp_issue of relatedIssuesPerSprint">
                        <div class="issue row" id={{sp_issue.id}}>
                            <div class="issue-priority-color-active" *ngIf="sp_issue.priority" [style.background] = "sp_issue.priority.color"></div>
                            <div class="issue-type-icon"><img  [src] = "sp_issue.type.icon" /></div>
                            <div class="issue-info row" id="attributessp">
                                <div class="code"><a href="#/issuecustoms/{{sp_issue.id}}">{{sp_issue.code}}</a></div>
                                <div class="summary">{{sp_issue.summary}}</div>
                                <div class="external-info">
                                    <div class="epic" *ngIf="sp_issue.epic" [style.background-color] = "sp_issue.epic.color">{{sp_issue.epic.name}}</div>
                                    <div class="version" *ngIf="sp_issue.version">{{sp_issue.version.name}}</div>
                                </div>
                                <div class="assignee-img"><img src="../../../../content/images/logo-jhipster.png" alt="assignee img"/></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="container pl-0 py-3">
            <div *ngIf="relatedIssuesPerBoard && Backlog">
                <div *ngIf="relatedIssuesPerBoard.length" class="product-backlog-info row">
                    <div class="backlog-option row">
                        <div class="product-backlog"><span>Product Backlog</span></div>
                        <div class="backlogIssues">{{relatedIssuesPerBoard.length}} issues</div>
                    </div>
                    <div class="NewSprint" *ngIf="activeSprint === undefined">
                        <button *ngIf="boardcustom.type.toUpperCase().localeCompare('SCRUM')===0" class="btn btn-warning" id="createSprintBtn" (click)="prepareSprint()" >Create Sprint</button>
                    </div>
                </div>

                <div *ngFor="let issue of relatedIssuesPerBoard">
                    <div *ngIf="issue.sprint === null">
                        <div class="issue row" id={{issue.id}} draggable="true" (dragstart)="dragStart($event)" (dragend)="dragend($event)">
                            <div class="issue-priority-color" *ngIf="issue.priority" [style.background] = "issue.priority.color"></div>
                            <div class="issue-type-icon"><img  [src] = "issue.type.icon" /></div>
                            <div class="issue-info row" id="attributes">
                                <div class="code"><a href="#/issuecustoms/{{issue.id}}">{{issue.code}}</a></div>
                                <div class="summary">{{issue.summary}}</div>
                                <div class="external-info">
                                    <div class="epic" *ngIf="issue.epic" [style.background-color] = "issue.epic.color">{{issue.epic.name}}</div>
                                    <div class="version" *ngIf="issue.version">{{issue.version.name}}</div>
                                </div>
                                <div class="assignee-img"><img src="../../../../content/images/logo-jhipster.png" alt="assignee img"/></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>



        <div class="container-fluid" *ngIf="relatedColumns && (ActiveSprint || KanbanBoard)">
            <div id="agileColumns" class="row">
                <div class="panel panel-primary col" *ngFor="let col of relatedColumns">
                    <div class="agileColumn">
                        <div class="panel-heading column-name"> {{col.name}} </div>
                        <div class="panel-body-active column-content-active" id="columndroppable" (dragover)="allowDropColBoard($event)" (drop)="dropColBoard($event)" (dragleave)="dragleaveColBoard($event)">
                            <div *ngFor="let issueCol of relatedIssuesPerSprint">

                                <div class="issue-active row" id={{issueCol.id}} draggable="true" (dragstart)="dragStartColBoard($event)" (dragend)="dragendColBoard($event)">
                                    <div class="issue-priority-color-active" *ngIf="issueCol.priority" [style.background] = "issueCol.priority.color"></div>
                                    <div class="card-content-active">
                                        <div class="card-body-active">
                                            <div class="info row pl-3">
                                                <div class="issue-type-icon-active"><img  [src] = "issueCol.type.icon" /></div>
                                                <div class="issue-code-active"><div class="card-title"><a [routerLink]="['../issuecustoms', issueCol.id ]">{{issueCol.code}}</a></div></div>
                                                <div class="assignee-img-active"><img src="../../../../content/images/logo-jhipster.png" alt="assignee img"/></div>
                                            </div>
                                            <div class="issue-summary pl-3">{{issueCol.summary}}</div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>

-->

    <div *ngIf="myColumns && relatedColumns">

        <div>
            <br/>

            <h4>
                <span>Total Columns on this Board : {{relatedColumns.length}}</span>
                <button class="btn btn-primary float-right jh-create-entity create-column-custom" [routerLink]="['/', { outlets: { popup: ['columncustom-new'] } }]">
                    <span class="fa fa-plus"></span>
                    <span class="hidden-sm-down" >
                    Create new Column
                    </span>
                </button>
            </h4>
            <jhi-alert></jhi-alert>
            <br/>
            <div class="table-responsive" *ngIf="relatedColumns">
                <table class="table table-striped">
                    <thead>
                    <tr jhiSort [(predicate)]="predicate" [(ascending)]="reverse">
                        <!--<th jhiSortBy="id"><span>ID</span> <span class="fa fa-sort"></span></th>-->
                        <th jhiSortBy="code"><span>Code</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="name"><span>Name</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="min"><span>Min</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="max"><span>Max</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="board"><span>Board</span> <span class="fa fa-sort"></span></th>

                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let column of relatedColumns ;trackBy: trackId">
                        <!--<td><a [routerLink]="['../columncustoms', column.id ]">{{column.id}}</a></td>-->
                        <td><a [routerLink]="['../../columncustoms', column.id ]">{{column.code}}</a></td>
                        <td>{{column.name}}</td>
                        <td>{{column.min}}</td>
                        <td>{{column.max}}</td>
                        <td *ngIf="column.board">{{column.board.name}}</td>
                        <td class="text-right">
                            <div class="btn-group flex-btn-group-container">

                                <button type="submit"
                                        [routerLink]="['../../columncustoms', column.id ]"
                                        class="btn btn-info btn-sm">
                                    <span class="fa fa-eye"></span>
                                    <span class="d-none d-md-inline">View</span>
                                </button>
                                <button type="submit"
                                        [routerLink]="['/', { outlets: { popup: 'columncustoms/'+ column.id + '/edit'} }]"
                                        replaceUrl="true"
                                        queryParamsHandling="merge"
                                        class="btn btn-primary btn-sm">
                                    <span class="fa fa-pencil"></span>
                                    <span class="d-none d-md-inline">Edit</span>
                                </button>
                                <button type="submit"
                                        [routerLink]="['/', { outlets: { popup: 'columncustoms/'+ column.id + '/delete'} }]"
                                        replaceUrl="true"
                                        queryParamsHandling="merge"
                                        class="btn btn-danger btn-sm">
                                    <span class="fa fa-remove"></span>
                                    <span class="d-none d-md-inline">Delete</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

        </div>




    </div>

    <div *ngIf="myStatuses && relatedStatuses" >

        <div>
            <br/>

            <h4>
                <span>Total Mapped Statuses on this Board : {{relatedStatuses.length}}</span>
                <button class="btn btn-primary float-right jh-create-entity create-status-custom" [routerLink]="['/', { outlets: { popup: ['statuscustom-new'] } }]">
                    <span class="fa fa-plus"></span>
                    <span class="hidden-sm-down" >
                    Create new Status
                    </span>
                </button>
            </h4>
            <jhi-alert></jhi-alert>
            <br/>
            <div class="table-responsive" *ngIf="relatedStatuses">
                <table class="table table-striped">
                    <thead>
                    <tr jhiSort [(predicate)]="predicate" [(ascending)]="reverse">
                        <!--<th jhiSortBy="id"><span>ID</span> <span class="fa fa-sort"></span></th>-->
                        <th jhiSortBy="code"><span>Code</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="name"><span>Name</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="description"><span>Description</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="column"><span>Column</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="icon"><span>Icon</span> <span class="fa fa-sort"></span></th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let status of relatedStatuses ;trackBy: trackId">
                        <!--<td><a [routerLink]="['../status', status.id ]">{{status.id}}</a></td>-->
                        <td><a [routerLink]="['../../statuscustoms', status.id ]">{{status.code}}</a></td>
                        <td>{{status.name}}</td>
                        <td>{{status.description}}</td>
                        <td *ngIf="status.column">{{status.column.name}}</td>
                        <td><img  class="img-responsive" [attr.src] = "status.icon"  style="max-width: 35px; max-height: 35px"/></td>
                        <td class="text-right">
                            <div class="btn-group flex-btn-group-container">
                                <button type="submit"
                                        [routerLink]="['../../statuscustoms', status.id ]"
                                        class="btn btn-info btn-sm">
                                    <span class="fa fa-eye"></span>
                                    <span class="d-none d-md-inline">View</span>
                                </button>
                                <button type="submit"
                                        [routerLink]="['/', { outlets: { popup: 'statuscustoms/'+ status.id + '/edit'} }]"
                                        replaceUrl="true"
                                        queryParamsHandling="merge"
                                        class="btn btn-primary btn-sm">
                                    <span class="fa fa-pencil"></span>
                                    <span class="d-none d-md-inline">Edit</span>
                                </button>
                                <button type="submit"
                                        [routerLink]="['/', { outlets: { popup: 'statuscustoms/'+ status.id + '/delete'} }]"
                                        replaceUrl="true"
                                        queryParamsHandling="merge"
                                        class="btn btn-danger btn-sm">
                                    <span class="fa fa-remove"></span>
                                    <span class="d-none d-md-inline">Delete</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>




    </div>

    <div *ngIf="mySprints && relatedSprints">

        <div>
            <br/>

            <h4>
                <span>Total Sprints on this Board : {{relatedSprints.length}}</span>
                <button class="btn btn-primary float-right jh-create-entity create-sprint-custom" [routerLink]="['/', { outlets: { popup: ['sprintcustom-new'] } }]">
                    <span class="fa fa-plus"></span>
                    <span class="hidden-sm-down" >
                    Create new Sprint
                    </span>
                </button>
            </h4>

            <h5>
                <span *ngIf="activeSprint">Active Sprint : {{activeSprint.name}}</span>
            </h5>

            <jhi-alert></jhi-alert>
            <br/>
            <div class="table-responsive" *ngIf="relatedSprints">
                <table class="table table-striped">
                    <thead>
                    <tr jhiSort [(predicate)]="predicate" [(ascending)]="reverse">
                        <!--<th jhiSortBy="id"><span>ID</span> <span class="fa fa-sort"></span></th>-->
                        <th jhiSortBy="code"><span>Code</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="name"><span>Name</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="startDate"><span>Start Date</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="endDate"><span>End Date</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="goal"><span>Goal</span> <span class="fa fa-sort"></span></th>
                        <th jhiSortBy="board"><span>Board</span> <span class="fa fa-sort"></span></th>

                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let sprint of relatedSprints ;trackBy: trackId">
                        <!--<td><a [routerLink]="['../sprintcustoms', sprint.id ]">{{sprint.id}}</a></td>-->
                        <td><a [routerLink]="['../../sprintcustoms', sprint.id ]">{{sprint.code}}</a></td>
                        <td>{{sprint.name}}</td>
                        <td>{{sprint.startDate | date:'mediumDate'}}</td>
                        <td>{{sprint.endDate | date:'mediumDate'}}</td>
                        <td>{{sprint.goal}}</td>
                        <td *ngIf="sprint.board">{{sprint.board.name}}</td>
                        <td class="text-right">
                            <div class="btn-group flex-btn-group-container">

                                <button type="submit" *ngIf="!sprint.isActive"
                                        [routerLink]="['/', { outlets: { popup: 'sprintcustoms/'+ sprint.id + '/start'} }]"
                                        replaceUrl="true"
                                        queryParamsHandling="merge"
                                        class="btn btn-success btn-sm">
                                    <span class="fa fa-check"></span>
                                    <span class="d-none d-md-inline">Start</span>
                                </button>
                                <button type="submit"
                                        [routerLink]="['../../sprintcustoms', sprint.id ]"
                                        class="btn btn-info btn-sm">
                                    <span class="fa fa-eye"></span>
                                    <span class="d-none d-md-inline">View</span>
                                </button>
                                <button type="submit"
                                        [routerLink]="['/', { outlets: { popup: 'sprintcustoms/'+ sprint.id + '/edit'} }]"
                                        replaceUrl="true"
                                        queryParamsHandling="merge"
                                        class="btn btn-primary btn-sm">
                                    <span class="fa fa-pencil"></span>
                                    <span class="d-none d-md-inline">Edit</span>
                                </button>
                                <button type="submit"
                                        [routerLink]="['/', { outlets: { popup: 'sprintcustoms/'+ sprint.id + '/delete'} }]"
                                        replaceUrl="true"
                                        queryParamsHandling="merge"
                                        class="btn btn-danger btn-sm">
                                    <span class="fa fa-remove"></span>
                                    <span class="d-none d-md-inline">Delete</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>



    </div>

</div>





